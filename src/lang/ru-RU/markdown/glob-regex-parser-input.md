# Специфические входы анализатора Glob-regex

## Пользовательский glob-regex

Здесь вы создаете глобус для извлечения заголовка из пути к файлу. Прочитайте всю статью [специальные символы глобуса](#special-glob-characters), если вы не знаете, как построить глобус.

## Как это работает?

Помимо специальных символов glob, анализатор glob требует ввода переменной `${/.../}`{.noWrap}. Анализатор определит его местоположение внутри вашего глобуса, например:

| Пользовательский Глоб | Место                 |
| --------------------- | --------------------- |
| `${/.+/}/*/*.txt`     | Первый уровень слева  |
| `{*,*/*}/${/.+/}.txt` | Первый уровень справа |
| `**/${/.+/}/*.txt`    | Второй уровень справа |

После получения позиции `${/.../}`{.noWrap}, `${/.../}`{.noWrap} будет заменен на подстановочный знак `*`.

## Постобработка регексов

После извлечения заголовка он будет обработан регулярным выражением. Существует три способа записи регулярного выражения.

### Регулярное выражение без захвата: `${/.+/}`{.noWrap}

Это практически идентично анализатору "Glob" - каждый фрагмент извлеченного заголовка будет использован.

### Регулярное выражение с захватными скобками: `${/(.+)/}`{.noWrap}

Допускается несколько совпадений и групп захвата. Например, здесь у нас есть 2 группы соответствия с несколькими группами захвата:
```
${/(.*?)\s*\[USA\]\s*(.+)|(.*)/}
```
Будет использована первая группа матчей (слева направо) со всеми правильными захватами. Кроме того, все группы захвата будут **соединены**.

### Регулярное выражение с захватом скобок и заменой текста: `${/(.+)/|...}`{.noWrap}

Аналогичен [регулярному выражению с захватом скобок](#regular-expression-with-capture-brackets), за исключением того, как он обрабатывает захваченные группы. Заменяющий текст можно использовать для перемещения по захваченным группам. Например:
```
${/(.*?)\s*\[USA\]\s*(.+)/|Вторая группа захвата: "$2" предшествует первой, которая "$1" }
```
Если наша первая группа захвата - `Legend of Zelda`, а вторая - `SUPER EDITION`, то мы получим следующее (не очень полезное) название:

`Вторая группа захвата: "SUPER EDITION" предшествует первой, которая является "Legend of Zelda"`

По умолчанию текст останется нетронутым, поэтому, если вы видите несколько символов в конце, обязательно добавьте `.*` в конец или `.*?` в начало регулярного выражения.

### Поддерживаемые флаги

Разрешенными флагами являются `i`, `g` и `u`.

## Ограничения

Извлечение позиции имеет некоторые ограничения - glob недействителен, если позиция не может быть извлечена. В большинстве случаев вы будете предупреждены о том, что делать нельзя, однако если вы найдете комбинацию, которая разрешена, но выдает неправильные названия, пожалуйста, оформите проблему на [github](https://github.com/FrogTheFrog/steam-rom-manager/issues).
